{% extends 'base.html' %}
{% block content %}
<form method="post" onsubmit="return validateForm()" class="container mt-4 p-4 border rounded bg-light shadow-sm" style="max-width: 500px;">
    {% csrf_token %}


    <!-- Error Alert -->
     {% if error %}
        <div id="errorAlert" class="alert alert-danger " role="alert">{{msg}}</div>
    {% endif %}
    {%if success %}
        <div id="successAlert" class="alert alert-success" role="alert">{{ msg }}</div>
    {% endif %}
    <div id="errorAlert" class="alert alert-danger d-none" role="alert"></div>


    <!-- Phone -->
    <div class="mb-3">
        <label for="phno" class="form-label">Phone Number</label>
        <input type="number" name="phno" id="phno" class="form-control" pattern="\d{10}" title="Enter exactly 10 digits" required>
    </div>

    <!-- Name -->
    <div class="mb-3">
        <label class="form-label">Name</label>
        <input type="text" name="name" class="form-control" required>
    </div>

    

    <!-- Village -->
    <div class="mb-3">
        <label class="form-label">Select Village</label>
        <select name="village_name" class="form-select" required>
            <option value="" disabled selected>Select village</option>
            {% for v in village %}
                <option value="{{ v.id }}">{{ v.village }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="mb-3">
        <label class="form-label">Select Role  </label>
        <select name="role" class="form-select" required>
            <option value="" disabled selected>Select Role</option>
            {% for r in roles %}
                <option value="{{ r.id }}">{{ r.role }}</option>
            {% endfor %}
        </select>
    </div>


   

    

    <!-- Submit -->
    <div class="text-center">
        <button type="submit" class="btn btn-primary px-4">Save</button>
    </div>
</form>

<!-- Bootstrap JS Validation -->
<script>
function showError(message) {
    const alertBox = document.getElementById('errorAlert');
    alertBox.textContent = message;
    alertBox.classList.remove('d-none');
}

function validateForm() {
    const phno = document.getElementById('phno').value.trim();
    <!-- const password = document.getElementById('password').value;
    const repassword = document.getElementById('repassword').value; -->

    if (!/^\d{10}$/.test(phno)) {
        showError('Phone number must be exactly 10 digits.');
        return false;
    }

    

    return true;
}
</script>
{% endblock %}